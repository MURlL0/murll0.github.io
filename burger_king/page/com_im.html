<!DOCTYPE html>
<html lang="pt-br" class="dark:bg-gray-900">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="shortcut icon" href="../assets/burger-king.svg" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            'bk-red': '#d62300',
            'bk-orange': '#ff8233',
          }
        }
      }
    }
  </script>
  <title>Calculadora BK - Completo/Incompleto</title>
</head>

<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
  <!-- Menu -->
  <nav class="bg-white dark:bg-gray-800 shadow-lg fixed w-full top-0 z-50">
    <div class="max-w-7xl mx-auto px-4">
      <div class="flex justify-between h-16">
        <div class="flex items-center">
          <img src="../assets/burger-king.svg" alt="BK Logo" class="h-8 w-8">
          <span class="ml-2 text-xl font-bold text-bk-red">Juliana</span>
        </div>

        <!-- Menu Hamburger (Mobile) -->
        <div class="flex items-center md:hidden">
          <button id="mobile-menu-button" class="text-gray-700 dark:text-gray-200 hover:text-bk-red">
            <i class="fas fa-bars text-2xl"></i>
          </button>
        </div>

        <!-- Menu Desktop -->
        <div class="hidden md:flex items-center space-x-4">
          <a href="../index.html"
            class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Início</a>
          <a href="home.html" class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Vendas
            30min</a>
          <a href="com_im.html"
            class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Completo/Incompleto</a>
          <a href="batata.html" class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Batatas</a>
          <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
            <i class="fas fa-moon text-gray-600 dark:text-gray-400"></i>
          </button>
        </div>
      </div>

      <!-- Menu Mobile (Dropdown) -->
      <div id="mobile-menu" class="hidden md:hidden pb-4">
        <div class="flex flex-col space-y-4">
          <a href="../index.html"
            class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Início</a>
          <a href="home.html" class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Vendas
            30min</a>
          <a href="com_im.html"
            class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Completo/Incompleto</a>
          <a href="batata.html" class="text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">Batatas</a>
          <button id="theme-toggle-mobile"
            class="flex items-center text-gray-700 dark:text-gray-200 hover:text-bk-red transition-colors">
            <i class="fas fa-moon mr-2"></i>
            Alternar Tema
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Conteúdo Principal -->
  <main class="pt-20 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-8">
      <h1 class="text-3xl font-bold text-center text-gray-800 dark:text-white mb-8">Calculadora de Completo/Incompleto
      </h1>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Calculadora Completo -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
          <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-6">Completo</h2>
          <form id="completoForm" class="space-y-6">
            <div class="space-y-2">
              <label for="valorCompleto" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
                Valor do Completo (R$)
              </label>
              <input type="number" id="valorCompleto" step="0.01" required
                class="w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-bk-red focus:border-transparent">
            </div>

            <div class="space-y-2">
              <label for="vendaCompleto" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
                Venda (R$)
              </label>
              <input type="number" id="vendaCompleto" step="0.01" required
                class="w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-bk-red focus:border-transparent">
            </div>

            <button type="submit"
              class="w-full bg-bk-red hover:bg-bk-orange text-white font-bold py-3 px-4 rounded-md transition-colors flex items-center justify-center gap-2">
              <i class="fas fa-calculator"></i>
              Calcular
            </button>

            <div id="resultadoCompleto" class="mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hidden">
              <p class="text-lg font-semibold text-gray-800 dark:text-white">
                Porcentagem: <span class="text-bk-red">0%</span>
              </p>
            </div>
          </form>
        </div>

        <!-- Calculadora Incompleto -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
          <h2 class="text-xl font-semibold text-gray-800 dark:text-white mb-6">Incompleto</h2>
          <form id="incompletoForm" class="space-y-6">
            <div class="space-y-2">
              <label for="valorIncompleto" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
                Valor do Incompleto (R$)
              </label>
              <input type="number" id="valorIncompleto" step="0.01" required
                class="w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-bk-red focus:border-transparent">
            </div>

            <div class="space-y-2">
              <label for="vendaIncompleto" class="block text-sm font-medium text-gray-700 dark:text-gray-200">
                Venda (R$)
              </label>
              <input type="number" id="vendaIncompleto" step="0.01" required
                class="w-full px-3 py-2 border dark:border-gray-600 rounded-md bg-gray-50 dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-bk-red focus:border-transparent">
            </div>

            <button type="submit"
              class="w-full bg-bk-red hover:bg-bk-orange text-white font-bold py-3 px-4 rounded-md transition-colors flex items-center justify-center gap-2">
              <i class="fas fa-calculator"></i>
              Calcular
            </button>

            <div id="resultadoIncompleto" class="mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg hidden">
              <p class="text-lg font-semibold text-gray-800 dark:text-white">
                Porcentagem: <span class="text-bk-red">0%</span>
              </p>
            </div>
          </form>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Menu Mobile Toggle
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    mobileMenuButton.addEventListener('click', () => {
      const isOpen = mobileMenu.classList.toggle('hidden');
      mobileMenuButton.querySelector('i').className = isOpen ? 'fas fa-bars text-2xl' : 'fas fa-times text-2xl';
    });

    // Theme Toggle (Desktop e Mobile)
    const themeToggle = document.getElementById('theme-toggle');
    const themeToggleMobile = document.getElementById('theme-toggle-mobile');
    const html = document.documentElement;

    const savedTheme = localStorage.getItem('theme') || 'light';
    html.classList.toggle('dark', savedTheme === 'dark');
    updateIcon(savedTheme);

    function toggleTheme() {
      const isDark = html.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      updateIcon(isDark ? 'dark' : 'light');
    }

    themeToggle.addEventListener('click', toggleTheme);
    themeToggleMobile.addEventListener('click', toggleTheme);

    function updateIcon(theme) {
      const desktopIcon = themeToggle.querySelector('i');
      const mobileIcon = themeToggleMobile.querySelector('i');

      const iconClass = theme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
      desktopIcon.className = `${iconClass} text-gray-600 dark:text-gray-400`;
      mobileIcon.className = `${iconClass} mr-2`;
    }

    // Função para truncar número sem arredondar
    function truncarNumero(numero, casasDecimais) {
      const regex = new RegExp(`^-?\\d+(?:\\.\\d{0,${casasDecimais}})?`);
      return numero.toString().match(regex)[0];
    }

    // Calculadora Completo
    document.getElementById('completoForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const valorCompleto = parseFloat(document.getElementById('valorCompleto').value);
      const vendaCompleto = parseFloat(document.getElementById('vendaCompleto').value);

      if (vendaCompleto === 0) {
        alert('A venda não pode ser zero!');
        return;
      }

      const porcentagemCompleto = (valorCompleto / vendaCompleto) * 100;

      const resultadoCompleto = document.getElementById('resultadoCompleto');
      resultadoCompleto.querySelector('span').textContent = truncarNumero(porcentagemCompleto, 3) + '%';
      resultadoCompleto.classList.remove('hidden');
    });

    // Calculadora Incompleto
    document.getElementById('incompletoForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const valorIncompleto = parseFloat(document.getElementById('valorIncompleto').value);
      const vendaIncompleto = parseFloat(document.getElementById('vendaIncompleto').value);

      if (vendaIncompleto === 0) {
        alert('A venda não pode ser zero!');
        return;
      }

      const porcentagemIncompleto = (valorIncompleto / vendaIncompleto) * 100;

      const resultadoIncompleto = document.getElementById('resultadoIncompleto');
      resultadoIncompleto.querySelector('span').textContent = truncarNumero(porcentagemIncompleto, 3) + '%';
      resultadoIncompleto.classList.remove('hidden');
    });
  </script>
</body>

</html>